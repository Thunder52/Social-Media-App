<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create Post - SocialHub</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/createPage.css">
  </head>

  <body>
    <div class="composer-container">
      <a href="/home" class="back-link">
        <i class="bi bi-arrow-left"></i>
        Back to Feed
      </a>

      <div class="composer-card">
        <div class="composer-header">
          <h3>
            <i class="bi bi-pencil-square"></i>
            Create New Post
          </h3>
        </div>

        <div class="composer-body">
          <form action="/create" method="POST" enctype="multipart/form-data">
            <div class="mb-4">
              <label class="form-label fw-semibold mb-3" style="color: #495057;">
                <i class="bi bi-chat-quote me-2"></i>What's on your mind?
              </label>
              <textarea
                name="description"
                class="form-control form-textarea"
                rows="5"
                placeholder="Share your thoughts, moments, or ideas..."
                required
              ></textarea>
            </div>
            <div class="mb-4 d-flex gap-5 align-items-end justify-content-center">
              <label class="form-label fw-semibold mb-3" style="color: #495057;">
                <i class="bi bi-image me-2"></i>Add an Image
              </label>
              <label for="imageInput" class="upload-section" id="uploadSection">
                <input type="file" name="image" id="imageInput" class="d-none"/>
                <i class="bi bi-cloud-upload upload-icon"></i>
                <p class="upload-text">
                  <strong>Click to upload</strong>
                  <small>PNG, JPG up to 5MBS</small>
                </p>
              </label>
              <div class="file-preview" id="filePreview">
                <i class="bi bi-file-earmark-image"></i>
                <span class="file-name" id="fileName"></span>
                <i class="bi bi-x-circle remove-file" id="removeFile"></i>
              </div>
            </div>
            <div class="mb-4">
              <div class="privacy-selector">
                <div class="privacy-label">
                  <i class="bi bi-shield-check"></i>
                  Who can see this post?
                </div>
                
                <div class="privacy-option">
                  <input type="radio" name="isPrivate" value="false" id="publicPost" checked>
                  <i class="bi bi-globe"></i>
                  <label for="publicPost">
                    <strong>Everyone</strong>
                    <div style="font-size: 12px; color: #6c757d;">Anyone can view and reply</div>
                  </label>
                </div>

                <div class="privacy-option">
                  <input type="radio" name="isPrivate" value="true" id="privatePost">
                  <i class="bi bi-lock"></i>
                  <label for="privatePost">
                    <strong>Private</strong>
                    <div style="font-size: 12px; color: #6c757d;">Only you can see this</div>
                  </label>
                </div>
              </div>
            </div>
            <% if(errors && errors.length > 0){ %>
              <% errors.forEach(error => { %>
                <div class="error-message">
                  <i class="bi bi-exclamation-triangle-fill"></i>
                  <span><%= error %></span>
                </div>
              <% }) %>
            <% } %>
            <button type="submit" class="btn submit-btn">
              <i class="bi bi-send-fill me-2"></i>
              Share Post
            </button>
          </form>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      const imageInput = document.getElementById("imageInput");
      const uploadSection = document.getElementById("uploadSection");
      const filePreview = document.getElementById("filePreview");
      const fileName = document.getElementById("fileName");
      const removeFile = document.getElementById("removeFile");

      imageInput.addEventListener("change", (e) => {
        if (e.target.files.length) {
          const file = e.target.files[0];
          fileName.textContent = file.name;
        }
      });
      removeFile.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        imageInput.value = "";
      });
    </script>
  </body>
</html>